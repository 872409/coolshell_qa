<!DOCTYPE html><!--[if IE 8]>
<html id="ie8" dir="ltr" lang="zh-CN"
	prefix="og: https://ogp.me/ns#" >
<![endif]--><!--[if !(IE 8) ]><!--><html dir="ltr" lang="zh-CN" prefix="og: https://ogp.me/ns#"><!--<![endif]--><head><meta charset="UTF-8"/><title>Lua简明教程 | 酷 壳 - CoolShell</title><link rel="stylesheet" type="text/css" href="/assets/all.min.css"/><link rel="shortcut icon" href="/assets/favicon.png"/></head>
<body class="post-template-default single single-post postid-10739 single-format-standard group-blog">

<div id="page" class="hfeed site">

<div class="container">
<div class="row">

</div>
</div>
<div id="content" class="site-content">
<div class="container">
<div class="row">
<div id="primary" class="content-area  col-md-12" style="margin-top: 40px;">
<main id="main" role="main">
<article id="post-10739" class="post-content post-10739 post type-post status-publish format-standard hentry category-misc category-tools category-proglanguage tag-c tag-javascript tag-lua">
<header class="entry-header">
<span class="screen-reader-text">Lua简明教程</span>
<h1 class="entry-title">Lua简明教程</h1>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/10739.html" title="08:29" rel="bookmark"><time class="entry-date" datetime="2013-12-03T08:29:06+08:00" pubdate="">2013年12月03日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/10739.html#comments" class="comments-link">125 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 269,088 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" class="alignright" title="welcome!" alt="The Programming Language Lua" src="http://www.lua.org/images/lua.gif"/>这几天系统地学习了一下<a href="http://www.lua.org" target="_blank">Lua这个脚本语言</a>，Lua脚本是一个很轻量级的脚本，也是号称性能最高的脚本，用在很多需要性能的地方，比如：游戏脚本，nginx，wireshark的脚本，当你把他的源码下下来编译后，你会发现解释器居然不到200k，这是多么地变态啊（/bin/sh都要1M，MacOS平台），而且能和C语言非常好的互动。我很好奇得浏览了一下Lua解释器的源码，这可能是我看过最干净的C的源码了。</p>
<p>我不想写一篇大而全的语言手册，一方面是因为已经有了（见本文后面的链接），重要的原因是，因为大篇幅的文章会挫败人的学习热情，我始终觉得好的文章读起来就像拉大便一样，能一口气很流畅地搞完，才会让人爽（这也是我为什么不想写书的原因）。所以，这必然又是一篇“入厕文章”，还是那句话，我希望本文能够让大家利用上下班，上厕所大便的时间学习一个技术。呵呵。</p>
<p>相信你现在已经在厕所里脱掉裤子露出屁股已经准备好大便了，那就让我们畅快地排泄吧……</p>
<div id="ez-toc-container" class="ez-toc-v2_0_48 counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction">
<div class="ez-toc-title-container">
<p class="ez-toc-title">目录</p>
<span class="ez-toc-title-toggle"></span></div>
<nav><ul class="ez-toc-list ez-toc-list-level-1 "><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-1" href="#%E8%BF%90%E8%A1%8C" title="运行">运行</a></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-2" href="#%E8%AF%AD%E6%B3%95" title="语法">语法</a><ul class="ez-toc-list-level-5"><li class="ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-3" href="#%E6%B3%A8%E9%87%8A" title="注释">注释</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-4" href="#%E5%8F%98%E9%87%8F" title="变量">变量</a></li></ul></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-5" href="#%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5" title="控制语句">控制语句</a><ul class="ez-toc-list-level-5"><li class="ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-6" href="#while%E5%BE%AA%E7%8E%AF" title="while循环">while循环</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-7" href="#if-else%E5%88%86%E6%94%AF" title="if-else分支">if-else分支</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-8" href="#for_%E5%BE%AA%E7%8E%AF" title="for 循环">for 循环</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-9" href="#until%E5%BE%AA%E7%8E%AF" title="until循环">until循环</a></li></ul></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-10" href="#%E5%87%BD%E6%95%B0" title="函数">函数</a><ul class="ez-toc-list-level-5"><li class="ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-11" href="#%E9%80%92%E5%BD%92" title="递归">递归</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-12" href="#%E9%97%AD%E5%8C%85" title="闭包">闭包</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-13" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC" title="函数的返回值">函数的返回值</a></li><li class="ez-toc-page-1 ez-toc-heading-level-5"><a class="ez-toc-link ez-toc-heading-14" href="#%E5%B1%80%E9%83%A8%E5%87%BD%E6%95%B0" title="局部函数">局部函数</a></li></ul></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-15" href="#Table" title="Table">Table</a></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-16" href="#MetaTable_%E5%92%8C_MetaMethod" title="MetaTable 和 MetaMethod">MetaTable 和 MetaMethod</a></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-17" href="#%E2%80%9C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E2%80%9D" title="“面向对象”">“面向对象”</a></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-18" href="#%E6%A8%A1%E5%9D%97" title="模块">模块</a></li><li class="ez-toc-page-1 ez-toc-heading-level-4"><a class="ez-toc-link ez-toc-heading-19" href="#%E5%8F%82%E8%80%83" title="参考">参考</a></li></ul></nav></div>
<h4><span class="ez-toc-section" id="%E8%BF%90%E8%A1%8C"></span>运行<span class="ez-toc-section-end"></span></h4>
<p>首先，我们需要知道，Lua是类C的，所以，他是大小写字符敏感的。</p>
<p>下面是Lua的Hello World。注意：Lua脚本的语句的分号是可选的，这个和<a title="Go 语言简介（上）— 语法" href="/articles/8460.html" target="_blank">GO语言很类似</a>。</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">print(&#34;Hello World&#34;)</code></p>
<p>你可以像python一样，在命令行上运行lua命令后进入lua的shell中执行语句。</p>
<pre data-enlighter-language="shell" class="EnlighterJSRAW">chenhao-air:lua chenhao$ lua
Lua 5.2.2  Copyright (C) 1994-2013 Lua.org, PUC-Rio
&gt; print(&#34;Hello, World&#34;)
Hello, World
&gt; </pre>
<p><span id="more-10739"></span></p>
<p>也可以把脚本存成一个文件，用如下命令行来运行。</p>
<p><code data-enlighter-language="shell" class="EnlighterJSRAW">&gt;lua file.lua</code></p>
<p>或是像shell一样运行：</p>
<pre data-enlighter-language="shell" class="EnlighterJSRAW">chenhao-air:lua chenhao$ cat hello.lua
#!/usr/local/bin/lua
print(&#34;Hello, World&#34;)
chenhao-air:lua chenhao$ chmod +x hello.lua
chenhao-air:test chenhao$ ./hello.lua
Hello, World</pre>
<h4><span class="ez-toc-section" id="%E8%AF%AD%E6%B3%95"></span>语法<span class="ez-toc-section-end"></span></h4>
<h5><span class="ez-toc-section" id="%E6%B3%A8%E9%87%8A"></span>注释<span class="ez-toc-section-end"></span></h5>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">-- 两个减号是行注释</code></p>
<p> </p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">--[[
 这是块注释
 这是块注释
 --]]</pre>
<h5><span class="ez-toc-section" id="%E5%8F%98%E9%87%8F"></span>变量<span class="ez-toc-section-end"></span></h5>
<p>Lua的数字只有double型，64bits，你不必担心Lua处理浮点数会慢（除非大于100,000,000,000,000），或是会有精度问题。</p>
<p>你可以以如下的方式表示数字，0x开头的16进制和C是很像的。</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">num = 1024
num = 3.0
num = 3.1416
num = 314.16e-2
num = 0.31416E1
num = 0xff
num = 0x56
</pre>
<p>字符串你可以用单引号，也可以用双引号，还支持C类型的转义，比如： ‘\a’ （响铃）， ‘\b’ （退格）， ‘\f’ （表单）， ‘\n’ （换行）， ‘\r’ （回车）， ‘\t’ （横向制表）， ‘\v’ （纵向制表）， ‘\\’ （反斜杠）， ‘\”‘ （双引号）， 以及 ‘\” （单引号)</p>
<p>下面的四种方式定义了完全相同的字符串（其中的两个中括号可以用于定义有换行的字符串）</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">a = &#39;alo\n123&#34;&#39;
a = &#34;alo\n123\&#34;&#34;
a = &#39;\97lo\10\04923&#34;&#39;
a = [[alo
123&#34;]]</pre>
<p>C语言中的NULL在Lua中是nil，比如你访问一个没有声明过的变量，就是nil，比如下面的v的值就是nil</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">v = UndefinedVariable</code></p>
<p>布尔类型只有nil和false是 false，数字0啊，‘’空字符串（’\0’）都是true！</p>
<p>另外，需要注意的是：lua中的变量如果没有特殊说明，全是全局变量，那怕是语句块或是函数里。变量前加local关键字的是局部变量。</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">theGlobalVar = 50
local theLocalVar = &#34;local variable&#34;</pre>
<h4><span class="ez-toc-section" id="%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"></span>控制语句<span class="ez-toc-section-end"></span></h4>
<p>不多说了，直接看代码吧（注意：Lua没有++或是+=这样的操作）</p>
<h5><span class="ez-toc-section" id="while%E5%BE%AA%E7%8E%AF"></span>while循环<span class="ez-toc-section-end"></span></h5>
<pre data-enlighter-language="c" class="EnlighterJSRAW">sum = 0
num = 1
while num &lt;= 100 do
    sum = sum + num
    num = num + 1
end
print(&#34;sum =&#34;,sum)</pre>
<h5><span class="ez-toc-section" id="if-else%E5%88%86%E6%94%AF"></span>if-else分支<span class="ez-toc-section-end"></span></h5>
<pre data-enlighter-language="c" class="EnlighterJSRAW">if age == 40 and sex ==&#34;Male&#34; then
    print(&#34;男人四十一枝花&#34;)
elseif age &gt; 60 and sex ~=&#34;Female&#34; then
    print(&#34;old man without country!&#34;)
elseif age &lt; 20 then
    io.write(&#34;too young, too naive!\n&#34;)
else
    local age = io.read()
    print(&#34;Your age is &#34;..age)
end</pre>
<p>上面的语句不但展示了if-else语句，也展示了<br/>
1）“～=”是不等于，而不是!=<br/>
2）io库的分别从stdin和stdout读写的read和write函数<br/>
3）字符串的拼接操作符“..”</p>
<p>另外，条件表达式中的与或非为分是：and, or, not关键字。</p>
<h5><span class="ez-toc-section" id="for_%E5%BE%AA%E7%8E%AF"></span>for 循环<span class="ez-toc-section-end"></span></h5>
<pre data-enlighter-language="c" class="EnlighterJSRAW">sum = 0
for i = 1, 100 do
    sum = sum + i
end</pre>
<p> </p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">sum = 0
for i = 1, 100, 2 do
    sum = sum + i
end</pre>
<p> </p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">sum = 0
for i = 100, 1, -2 do
    sum = sum + i
end</pre>
<h5><span class="ez-toc-section" id="until%E5%BE%AA%E7%8E%AF"></span>until循环<span class="ez-toc-section-end"></span></h5>
<pre data-enlighter-language="c" class="EnlighterJSRAW">sum = 2
repeat
   sum = sum ^ 2 --幂操作
   print(sum)
until sum &gt;1000</pre>
<h4><span class="ez-toc-section" id="%E5%87%BD%E6%95%B0"></span>函数<span class="ez-toc-section-end"></span></h4>
<p>Lua的函数和Javascript的很像</p>
<h5><span class="ez-toc-section" id="%E9%80%92%E5%BD%92"></span>递归<span class="ez-toc-section-end"></span></h5>
<pre data-enlighter-language="c" class="EnlighterJSRAW">function fib(n)
  if n &lt; 2 then return 1 end
  return fib(n - 2) + fib(n - 1)
end</pre>
<h5><span class="ez-toc-section" id="%E9%97%AD%E5%8C%85"></span>闭包<span class="ez-toc-section-end"></span></h5>
<p>同样，Javascript附体！</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">function newCounter()
    local i = 0
    return function()     -- anonymous function
       i = i + 1
        return i
    end
end

c1 = newCounter()
print(c1())  --&gt; 1
print(c1())  --&gt; 2</pre>
<p> </p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">function myPower(x)
    return function(y) return y^x end
end

power2 = myPower(2)
power3 = myPower(3)

print(power2(4)) --4的2次方
print(power3(5)) --5的3次方</pre>
<h5><span class="ez-toc-section" id="%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"></span>函数的返回值<span class="ez-toc-section-end"></span></h5>
<p>和<a title="Go 语言简介（上）— 语法" href="/articles/8460.html" target="_blank">Go语言一样</a>，可以一条语句上赋多个值，如：</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">name, age, bGay = &#34;haoel&#34;, 37, false, &#34;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b1d9d0ded4ddf1d9dec5dcd0d8dd9fd2dedc">[email protected]</a>&#34;</code></p>
<p>上面的代码中，因为只有3个变量，所以第四个值被丢弃。</p>
<p>函数也可以返回多个值：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">function getUserInfo(id)
    print(id)
    return &#34;haoel&#34;, 37, &#34;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7a121b151f163a12150e171b131654191517">[email protected]</a>&#34;, &#34;https://coolshell.cn&#34;
end

name, age, email, website, bGay = getUserInfo()
</pre>
<p>注意：上面的示例中，因为没有传id，所以函数中的id输出为nil，因为没有返回bGay，所以bGay也是nil。</p>
<h5><span class="ez-toc-section" id="%E5%B1%80%E9%83%A8%E5%87%BD%E6%95%B0"></span>局部函数<span class="ez-toc-section-end"></span></h5>
<p>函数前面加上local就是局部函数，其实，Lua中的函数和Javascript中的一个德行。</p>
<p>比如：下面的两个函数是一样的：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">function foo(x) return x^2 end
foo = function(x) return x^2 end</pre>
<h4><span class="ez-toc-section" id="Table"></span>Table<span class="ez-toc-section-end"></span></h4>
<p>所谓Table其实就是一个Key Value的数据结构，它很像Javascript中的Object，或是PHP中的数组，在别的语言里叫Dict或Map，Table长成这个样子：</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">haoel = {name=&#34;ChenHao&#34;, age=37, handsome=True}</code></p>
<p>下面是table的CRUD操作：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">haoel.website=&#34;https://coolshell.cn/&#34;
local age = haoel.age
haoel.handsome = false
haoel.name=nil</pre>
<p>上面看上去像C/C++中的结构体，但是name,age, handsome, website都是key。你还可以像下面这样写义Table：</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">t = {[20]=100, [&#39;name&#39;]=&#34;ChenHao&#34;, [3.14]=&#34;PI&#34;} </code></p>
<p>这样就更像Key Value了。于是你可以这样访问：t[20]，t[“name”], t[3.14]。</p>
<p>我们再来看看数组：</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">arr = {10,20,30,40,50}</code></p>
<p>这样看上去就像数组了。但其实其等价于：</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">arr = {[1]=10, [2]=20, [3]=30, [4]=40, [5]=50}</code></p>
<p>所以，你也可以定义成不同的类型的数组，比如：</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">arr = {&#34;string&#34;, 100, &#34;haoel&#34;, function() print(&#34;coolshell.cn&#34;) end}</code></p>
<p>注：其中的函数可以这样调用：arr[4]()。</p>
<p>我们可以看到Lua的下标不是从0开始的，是从1开始的。</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">for i=1, #arr do
    print(arr[i])
end</pre>
<p>注：上面的程序中：#arr的意思就是arr的长度。</p>
<p>注：前面说过，Lua中的变量，如果没有local关键字，全都是全局变量，Lua也是用Table来管理全局变量的，Lua把这些全局变量放在了一个叫“_G”的Table里。</p>
<p>我们可以用如下的方式来访问一个全局变量（假设我们这个全局变量名叫globalVar）：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">_G.globalVar
_G[&#34;globalVar&#34;]</pre>
<p>我们可以通过下面的方式来遍历一个Table。</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">for k, v in pairs(t) do
    print(k, v)
end</pre>
<h4><span class="ez-toc-section" id="MetaTable_%E5%92%8C_MetaMethod"></span>MetaTable 和 MetaMethod<span class="ez-toc-section-end"></span></h4>
<p>MetaTable和MetaMethod是Lua中的重要的语法，MetaTable主要是用来做一些类似于C++重载操作符式的功能。</p>
<p>比如，我们有两个分数：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">fraction_a = {numerator=2, denominator=3}
fraction_b = {numerator=4, denominator=7}</pre>
<p>我们想实现分数间的相加：2/3 + 4/7，我们如果要执行： fraction_a + fraction_b，会报错的。</p>
<p>所以，我们可以动用MetaTable，如下所示：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">fraction_op={}
function fraction_op.__add(f1, f2)
    ret = {}
    ret.numerator = f1.numerator * f2.denominator + f2.numerator * f1.denominator
    ret.denominator = f1.denominator * f2.denominator
    return ret
end
</pre>
<p>为之前定义的两个table设置MetaTable：（其中的setmetatble是库函数）</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">setmetatable(fraction_a, fraction_op)
setmetatable(fraction_b, fraction_op)</pre>
<p>于是你就可以这样干了：（调用的是fraction_op.__add()函数）</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">fraction_s = fraction_a + fraction_b</code></p>
<p>至于__add这是MetaMethod，这是Lua内建约定的，其它的还有如下的MetaMethod：</p>
<pre>__add(a, b)                     对应表达式 a + b
__sub(a, b)                     对应表达式 a - b
__mul(a, b)                     对应表达式 a * b
__div(a, b)                     对应表达式 a / b
__mod(a, b)                     对应表达式 a % b
__pow(a, b)                     对应表达式 a ^ b
__unm(a)                        对应表达式 -a
__concat(a, b)                  对应表达式 a .. b
__len(a)                        对应表达式 #a
__eq(a, b)                      对应表达式 a == b
__lt(a, b)                      对应表达式 a &lt; b
__le(a, b)                      对应表达式 a &lt;= b
__index(a, b)                   对应表达式 a.b
__newindex(a, b, c)             对应表达式 a.b = c
__call(a, ...)                  对应表达式 a(...)</pre>
<h4><span class="ez-toc-section" id="%E2%80%9C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E2%80%9D"></span>“面向对象”<span class="ez-toc-section-end"></span></h4>
<p>上面我们看到有__index这个重载，这个东西主要是重载了find key的操作。这操作可以让Lua变得有点面向对象的感觉，让其有点像Javascript的prototype。（关于Javascrip的面向对象，你可以参看我之前写的<a title="Javascript 面向对象编程" href="/articles/6441.html" target="_blank">Javascript的面向对象</a>）</p>
<p>所谓__index，说得明确一点，如果我们有两个对象a和b，我们想让b作为a的prototype只需要：</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">setmetatable(a, {__index = b})</code></p>
<p>例如下面的示例：你可以用一个Window_Prototype的模板加上__index的MetaMethod来创建另一个实例：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">Window_Prototype = {x=0, y=0, width=100, height=100}
MyWin = {title=&#34;Hello&#34;}
setmetatable(MyWin, {__index = Window_Prototype})</pre>
<p>于是：MyWin中就可以访问x, y, width, height的东东了。（注：当表要索引一个值时如table[key], Lua会首先在table本身中查找key的值, 如果没有并且这个table存在一个带有__index属性的Metatable, 则Lua会按照__index所定义的函数逻辑查找）</p>
<p>有了以上的基础，我们可以来说说所谓的Lua的面向对象。</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">Person={}

function Person:new(p)
    local obj = p
    if (obj == nil) then
        obj = {name=&#34;ChenHao&#34;, age=37, handsome=true}
    end
    self.__index = self
    return setmetatable(obj, self)
end

function Person:toString()
    return self.name ..&#34; : &#34;.. self.age ..&#34; : &#34;.. (self.handsome and &#34;handsome&#34; or &#34;ugly&#34;)
end
</pre>
<p>上面我们可以看到有一个new方法和一个toString的方法。其中：</p>
<p>1）self 就是 Person，Person:new(p)，相当于Person.new(self, p)<br/>
2）new方法的self.__index = self 的意图是怕self被扩展后改写，所以，让其保持原样<br/>
3）setmetatable这个函数返回的是第一个参数的值。</p>
<p>于是：我们可以这样调用：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">me = Person:new()
print(me:toString())

kf = Person:new{name=&#34;King&#39;s fucking&#34;, age=70, handsome=false}
print(kf:toString())
</pre>
<p>继承如下，我就不多说了，Lua和Javascript很相似，都是在Prototype的实例上改过来改过去的。</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">Student = Person:new()

function Student:new()
    newObj = {year = 2013}
    self.__index = self
    return setmetatable(newObj, self)
end

function Student:toString()
    return &#34;Student : &#34;.. self.year..&#34; : &#34; .. self.name
end</pre>
<h4><span class="ez-toc-section" id="%E6%A8%A1%E5%9D%97"></span>模块<span class="ez-toc-section-end"></span></h4>
<p>我们可以直接使用require(“model_name”)来载入别的lua文件，文件的后缀是.lua。载入的时候就直接执行那个文件了。比如：</p>
<p>我们有一个hello.lua的文件：</p>
<p><code data-enlighter-language="c" class="EnlighterJSRAW">print(&#34;Hello, World!&#34;)</code></p>
<p>如果我们：require(“hello”)，那么就直接输出Hello, World！了。</p>
<p>注意：<br/>
1）require函数，载入同样的lua文件时，只有第一次的时候会去执行，后面的相同的都不执行了。<br/>
2）如果你要让每一次文件都会执行的话，你可以使用dofile(“hello”)函数<br/>
3）如果你要玩载入后不执行，等你需要的时候执行时，你可以使用 loadfile()函数，如下所示：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">local hello = loadfile(&#34;hello&#34;)
... ...
... ...
hello()</pre>
<p>loadfile(“hello”)后，文件并不执行，我们把文件赋给一个变量hello，当hello()时，才真的执行。（我们多希望JavaScript也有这样的功能（参看《<a title="Javascript 装载和执行" href="/articles/9749.html" target="_blank">Javascript 装载和执行</a>》））</p>
<p>当然，更为标准的玩法如下所示。</p>
<p>假设我们有一个文件叫mymod.lua，内容如下：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">local HaosModel = {}

local function getname()
    return &#34;Hao Chen&#34;
end

function HaosModel.Greeting()
    print(&#34;Hello, My name is &#34;..getname())
end

return HaosModel</pre>
<p>于是我们可以这样使用：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">local hao_model = require(&#34;mymod&#34;)
hao_model.Greeting()</pre>
<p>其实，require干的事就如下：（所以你知道为什么我们的模块文件要写成那样了）</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">local hao_model = (function ()
  --mymod.lua文件的内容--
end)()</pre>
<h4><span class="ez-toc-section" id="%E5%8F%82%E8%80%83"></span>参考<span class="ez-toc-section-end"></span></h4>
<p>我估计你差不多到擦屁股的时间了，所以，如果你还比较喜欢Lua的话，下面是几个在线文章你可以继续学习之：</p>
<ul>
<li><a href="http://manual.luaer.cn/" rel="nofollow">manual.luaer.cn</a> lua在线手册</li>
<li><a href="http://book.luaer.cn/" rel="nofollow">book.luaer.cn</a> lua在线lua学习教程</li>
<li><a href="http://www.codingnow.com/2000/download/lua_manual.html" rel="nofollow">lua参考手册</a>Lua参考手册的中文翻译（云风翻译版本）</li>
</ul>
<p>关于Lua的标库，你可以看看官方文档：<a href="http://lua-users.org/wiki/StringLibraryTutorial" target="_blank">string</a>，  <a href="http://lua-users.org/wiki/TableLibraryTutorial" target="_blank">table</a>， <a href="http://lua-users.org/wiki/MathLibraryTutorial" target="_blank">math</a>， <a href="http://lua-users.org/wiki/IoLibraryTutorial" target="_blank">io</a>， <a href="http://lua-users.org/wiki/OsLibraryTutorial" target="_blank">os</a>。</p>
<p>（全文完）</p>
<div style="margin-top: 15px; font-size: 16px;color: #cc0000;">
<p align="center"><strong>（转载本站文章请注明作者和出处 <a href="/">酷 壳 – CoolShell</a> ，请勿用于任何商业用途）</strong></p>
</div>

<div id="post-ratings-10739-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
<hr/><div class="row"><div class="col-md-6 cattegories"><span class="cat-links"><i class="fa fa-folder-open"></i>
<a href="javascript:void(0)" rel="category tag">杂项资源</a>, <a href="javascript:void(0)" rel="category tag">编程工具</a>, <a href="javascript:void(0)" rel="category tag">编程语言</a></span></div><div class="col-md-6 tags"><span class="tags-links"><i class="fa fa-tags"></i> <a href="javascript:void(0)" rel="tag">C++</a>, <a href="javascript:void(0)" rel="tag">Javascript</a>, <a href="javascript:void(0)" rel="tag">Lua</a></span></div></div> </footer>
</article>

<div class="fixed"></div> 
</main>

<div class="post-comments">
<div id="comments" class="comments-area">
<h2 class="comments-title">
《<span>Lua简明教程</span>》的相关评论 </h2>
<ol class="comment-list">
<li id="comment-1809931" class="comment even thread-even depth-1">
<article id="div-comment-1809931" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/349ab414450ae39d824ba45b5504740a?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/349ab414450ae39d824ba45b5504740a?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">a-ming</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-1809931"><time datetime="2016-02-21T03:32:45+08:00">2016年02月21日 03:32</time></a> </div>
</footer>
<div class="comment-content">
<p>bGay or bDay…</p>
</div>
 </article>
</li>
<li id="comment-1817661" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1817661" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/9e49a975356e79e6c17c1fd9e514bd2a?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/9e49a975356e79e6c17c1fd9e514bd2a?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">小凤仙</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-1817661"><time datetime="2016-04-06T15:43:58+08:00">2016年04月06日 15:43</time></a> </div>
</footer>
<div class="comment-content">
<p>看完后得痔疮了。</p>
</div>
 </article>
</li>
<li id="comment-1829957" class="comment even thread-even depth-1">
<article id="div-comment-1829957" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/56ad36fe924dce6e86e2e4fe4859f39f?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/56ad36fe924dce6e86e2e4fe4859f39f?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">燎原火</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-1829957"><time datetime="2016-05-10T22:08:03+08:00">2016年05月10日 22:08</time></a> </div>
</footer>
<div class="comment-content">
<p>楼主写得太好了。。。当然。。。我是花了两个种才看完的。。。便秘严重了。</p>
<p>2）new方法的self.__index = self 的意图是怕self被扩展后改写，所以，让其保持原样</p>
<p>这段应该描述错了~，self.__index = self ,然后再setmetatable(obj, self)</p>
<p>是为了实例能够通过元表找到类下定义的方法，实际测试代码没有self.__index = self 这句会导致实例找不到对应的函数而语法报错。</p>
</div>
 </article>
</li>
<li id="comment-1874751" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="http://go2live.cn/archives/23189" class="url" rel="ugc external nofollow">快学Lua-演道</a> </div>
</li>
<li id="comment-1889537" class="comment even thread-even depth-1">
<article id="div-comment-1889537" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/4e906ccf520d4a77c76492dc7e001445?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/4e906ccf520d4a77c76492dc7e001445?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn"><a href="http://blog.csdn.net/zjf280441589" class="url" rel="ugc external nofollow">翡青</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-1889537"><time datetime="2016-10-01T10:09:37+08:00">2016年10月01日 10:09</time></a> </div>
</footer>
<div class="comment-content">
<p>参考您的博客写了一篇有关于Lua设计模型的文章 <a href="http://blog.csdn.net/zjf280441589/article/details/52716720" rel="nofollow ugc">http://blog.csdn.net/zjf280441589/article/details/52716720</a></p>
</div>
 </article>
</li>
<li id="comment-1904240" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="http://www.luckerworks.com/archives/18414" class="url" rel="ugc external nofollow">openresty详解 | 歪布IT笔记</a> </div>
</li>
<li id="comment-1911525" class="comment even thread-even depth-1">
<article id="div-comment-1911525" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/91a11e40ae94f02faf430299136517d0?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/91a11e40ae94f02faf430299136517d0?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn"><a href="http://limen.github.io" class="url" rel="ugc external nofollow">皮皮</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-1911525"><time datetime="2017-01-22T16:41:39+08:00">2017年01月22日 16:41</time></a> </div>
</footer>
<div class="comment-content">
<p>来自维基百科：Javascript发表于1995年，Lua发表于1993年。Lua的历史要比JavaScript悠久的。</p>
</div>
 </article>
</li>
<li id="comment-1914222" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="http://blog.375yikao.com/?p=41" class="url" rel="ugc external nofollow">ngx_lua – 提昂小站</a> </div>
</li>
<li id="comment-1919564" class="pingback even thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://www.codeba.cc/lua-unity%e5%85%b3%e4%ba%8elua%e7%9a%84%e4%bd%bf%e7%94%a8.html" class="url" rel="ugc external nofollow">Lua——————unity关于lua的使用 | Codeba</a> </div>
</li>
<li id="comment-1929544" class="comment odd alt thread-odd thread-alt depth-1 parent">
<article id="div-comment-1929544" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/12eb901867e60c40ae569aa886b78a96?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/12eb901867e60c40ae569aa886b78a96?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">changyuchun</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-1929544"><time datetime="2018-05-30T14:32:35+08:00">2018年05月30日 14:32</time></a> </div>
</footer>
<div class="comment-content">
<p>local function getUserInfo(id)<br/>
print(id)<br/>
return “haoel”, 37, “<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f69e9799939ab69e99829b979f9ad895999b">[email protected]</a>”, “https://coolshell.cn”<br/>
end</p>
<p>name, age, email, website, bGay = getUserInfo(id)</p>
<p>为什么这个传入id参数运行之后输出还是nil？</p>
</div>
 </article>
<ol class="children">
<li id="comment-1944299" class="comment even depth-2">
<article id="div-comment-1944299" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/9f89ff338f6fc0a2efc0032d5f213d69?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/9f89ff338f6fc0a2efc0032d5f213d69?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">lynn wang</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-1944299"><time datetime="2018-11-20T17:21:02+08:00">2018年11月20日 17:21</time></a> </div>
</footer>
<div class="comment-content">
<p>你传的是id这个变量吧。。</p>
</div>
 </article>
</li>
</ol>
</li>
<li id="comment-1936913" class="pingback odd alt thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://hack.xingren.com/index.php/2018/08/07/openresty-guide/" class="url" rel="ugc external nofollow">OpenResty 不完全指南 - 杏仁技术站</a> </div>
</li>
<li id="comment-1997432" class="comment byuser comment-author-mayanbo even thread-odd thread-alt depth-1">
<article id="div-comment-1997432" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/e86493c9d45ca5ff30bae6e546bb2e1f?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/e86493c9d45ca5ff30bae6e546bb2e1f?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">mayanbo</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-1997432"><time datetime="2019-05-16T10:21:48+08:00">2019年05月16日 10:21</time></a> </div>
</footer>
<div class="comment-content">
<p>支持大神。</p>
</div>
 </article>
</li>
<li id="comment-2029733" class="pingback odd alt thread-even depth-1">
<div class="comment-body">
Pingback： <a href="https://www.dazhuanlan.com/2019/10/12/5da1f830e9d04/" class="url" rel="ugc external nofollow">初识redis - 大专栏 | 大专栏</a> </div>
</li>
<li id="comment-2037782" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-2037782" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/467dacca01e3c81300e3eb0f9b538be5?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/467dacca01e3c81300e3eb0f9b538be5?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">v6dp</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-2037782"><time datetime="2019-11-14T15:57:09+08:00">2019年11月14日 15:57</time></a> </div>
</footer>
<div class="comment-content">
<p>作者写这篇文章前是去看了 learnxinyminutes 吗</p>
</div>
 </article>
</li>
<li id="comment-2038376" class="comment odd alt thread-even depth-1">
<article id="div-comment-2038376" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/6ce8b94491d720ada0ed6425cc819011?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/6ce8b94491d720ada0ed6425cc819011?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn"><a href="http://www.52coder.net" class="url" rel="ugc external nofollow">52coder</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-2038376"><time datetime="2019-11-17T09:17:28+08:00">2019年11月17日 09:17</time></a> </div>
</footer>
<div class="comment-content">
<p>布尔类型只有nil和false是 false，数字0啊，‘’空字符串（’\0’）都是true！</p>
<p>num=nil</p>
<p>if num ~= false then<br/>
print(“Hello,world”)<br/>
end</p>
<p>这个为何打印Hello,world了?</p>
</div>
 </article>
</li>
<li id="comment-2071883" class="comment even thread-odd thread-alt depth-1">
<article id="div-comment-2071883" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/467e72228e7e10241775835482b3e1dc?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/467e72228e7e10241775835482b3e1dc?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn"><a href="https://w3cfed.com" class="url" rel="ugc external nofollow">w3cfed</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-2071883"><time datetime="2020-02-29T01:42:45+08:00">2020年02月29日 01:42</time></a> </div>
</footer>
<div class="comment-content">
<p>小巧，高效率。我在厕所看完了。</p>
</div>
 </article>
</li>
<li id="comment-2083765" class="comment odd alt thread-even depth-1 parent">
<article id="div-comment-2083765" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/1f51cec376e662a1001488cb1ab09952?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/1f51cec376e662a1001488cb1ab09952?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">冰红大碗茶</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-2083765"><time datetime="2020-03-30T13:12:51+08:00">2020年03月30日 13:12</time></a> </div>
</footer>
<div class="comment-content">
<p>你没有考虑到有人在吃饭的时候看这个东西啊</p>
</div>
 </article>
<ol class="children">
<li id="comment-2096290" class="comment even depth-2">
<article id="div-comment-2096290" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/20b783e0f73005993b67ccb9ea3fde89?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/20b783e0f73005993b67ccb9ea3fde89?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">wesong</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-2096290"><time datetime="2020-04-27T14:07:51+08:00">2020年04月27日 14:07</time></a> </div>
</footer>
<div class="comment-content">
<p>笑死我了?</p>
</div>
 </article>
</li>
</ol>
</li>
<li id="comment-2244758" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-2244758" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/8d2692dd8dfaf68fb3a56c98a99554ff?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/8d2692dd8dfaf68fb3a56c98a99554ff?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">xinjue_yi</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-2244758"><time datetime="2021-05-09T20:06:00+08:00">2021年05月09日 20:06</time></a> </div>
</footer>
<div class="comment-content">
<p>真搞笑，你打印的是id，又不是name, age, email…</p>
</div>
 </article>
</li>
<li id="comment-2277761" class="comment even thread-even depth-1">
<article id="div-comment-2277761" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/b686b7613f880570fa9288ac173255fe?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b686b7613f880570fa9288ac173255fe?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn"><a href="http://adoncn.com/" class="url" rel="ugc external nofollow">速卖通代运营</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-2277761"><time datetime="2021-07-21T01:21:29+08:00">2021年07月21日 01:21</time></a> </div>
</footer>
<div class="comment-content">
<p>支持一个！我在支持一下</p>
</div>
 </article>
</li>
<li id="comment-2370840" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-2370840" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/3337ac040f56b539a19ea5d93d4dcc68?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3337ac040f56b539a19ea5d93d4dcc68?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">双鱼</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/10739.html/comment-page-3#comment-2370840"><time datetime="2022-10-21T12:39:45+08:00">2022年10月21日 12:39</time></a> </div>
</footer>
<div class="comment-content">
<p>业务上一般什么情况会使用如此复杂的 lua 脚本呢? 暂时还没有碰到过</p>
</div>
 </article>
</li>
<li id="comment-2371085" class="pingback even thread-even depth-1">
<div class="comment-body">
Pingback： <a href="https://www.ccppcoding.com/archives/122237" class="url" rel="ugc external nofollow">lua中的MetaTable和MetaMethod | 高性能架构探索</a> </div>
</li>
</ol>
<nav class="navigation comment-navigation" role="navigation">
<h2 class="screen-reader-text">Comment navigation</h2>
<div class="nav-links">
<div id="commentnavi">
<span class="pages"><i class="fa fa-comments"></i> 评论分页</span>
<div id="commentpager">
<a class="prev page-numbers" href="/articles/10739.html/comment-page-2#comments">« 上一页</a>
<a class="page-numbers" href="/articles/10739.html/comment-page-1#comments">1</a>
<a class="page-numbers" href="/articles/10739.html/comment-page-2#comments">2</a>
<span aria-current="page" class="page-numbers current">3</span> <span id="cp_post_id">10739</span>
</div>
<div class="fixed"></div>
</div>
</div>
</nav>

</div>
</div>
</div>

</div> 
</div>

</div>

</div>
























</body></html>