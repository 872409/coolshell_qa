<!DOCTYPE html><!--[if IE 8]>
<html id="ie8" dir="ltr" lang="zh-CN"
	prefix="og: https://ogp.me/ns#" >
<![endif]--><!--[if !(IE 8) ]><!--><html dir="ltr" lang="zh-CN" prefix="og: https://ogp.me/ns#"><!--<![endif]--><head><meta charset="UTF-8"/><title>高科技：GDB回溯调试 | 酷 壳 - CoolShell</title><link rel="stylesheet" type="text/css" href="/assets/all.min.css"/><link rel="shortcut icon" href="/assets/favicon.png"/></head>
<body class="post-template-default single single-post postid-1502 single-format-standard group-blog">

<div id="page" class="hfeed site">

<div class="container">
<div class="row">

</div>
</div>
<div id="content" class="site-content">
<div class="container">
<div class="row">
<div id="primary" class="content-area  col-md-12" style="margin-top: 40px;">
<main id="main" role="main">
<article id="post-1502" class="post-content post-1502 post type-post status-publish format-standard hentry category-techarticle category-tools tag-debug tag-gdb tag-reversable-debugging">
<header class="entry-header">
<span class="screen-reader-text">高科技：GDB回溯调试</span>
<h1 class="entry-title">高科技：GDB回溯调试</h1>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/1502.html" title="17:14" rel="bookmark"><time class="entry-date" datetime="2009-09-28T17:14:08+08:00" pubdate="">2009年09月28日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/1502.html#comments" class="comments-link">17 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 15,221 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p>也许大家知道，GDB 版本7.0 (2009年9月release) 会是第一次开始支持Reversable Debugging （回溯调式技术），这是一种可以让在debug程序时当我们运行单步调试或是运行到断点时，可以以逆向执行程序的一种技术。（这是GNU的<a href="http://www.gnu.org/software/gdb/news/reversible.html" target="_blank">新闻链接</a>）</p>
<p>下面是GDB7.0版本所支持的回溯调试的命令，其中包括，continue，step，以及调试方向的设置。</p>
<li><strong>reverse-continue</strong> (‘rc’) — 继续程序运行到断点，但是是逆向运行程序。</li>
<li><strong>reverse-finish</strong> — 逆向运行程序直到跳出本层函数。</li>
<li><strong>reverse-next</strong> (‘rn’) — 语句单步向后跟踪程序。</li>
<li><strong>reverse-nexti</strong> (‘rni’) — 指令单步向后一条指令。</li>
<li><strong>reverse-step</strong> (‘rs’) — 向后执行一条语句，单步进入。</li>
<li><strong>reverse-stepi</strong> — 向后执行一条指令，单步进入。</li>
<li><strong>set exec-direction (forward/reverse)</strong> — 设置程序执行方向，向前或向后。</li>
<p><span id="more-1502"></span></p>
<p>在网上查了一下，发现VS2010好像也准备要支持这个东西，微软叫这个东西为“<a href="http://blogs.msdn.com/ianhu/archive/2009/05/13/historical-debugging-in-visual-studio-team-system-2010.aspx" target="_blank">Historical Debugging</a>”。</p>
<p>这个东西，对于我这个老家伙来说比较新鲜，而且还有点诡异。我有点没跟上这个技术，不知道这个技术主要是用来干什么？对于程序的运行的回滚？这样一来，如果，我某条语句创建了一个线程，或是一个文件，逆向执行回去，莫非它还能把这些程序创建出来的资源回收啦？就算是能回收，要是我的某个程序向网络发了些数据出去，莫非它还能给我再收回来？也许我想得太极端了，不过好像目前对这个技术的原始需求的说明不是很多，所以真不知道这个技术除了很酷，还有什么？也许是我理解错了，希望大家指点一下。</p>
<div style="margin-top: 15px; font-size: 16px;color: #cc0000;">
<p align="center"><strong>（转载本站文章请注明作者和出处 <a href="/">酷 壳 – CoolShell</a> ，请勿用于任何商业用途）</strong></p>
</div>

<div id="post-ratings-1502-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
<hr/><div class="row"><div class="col-md-6 cattegories"><span class="cat-links"><i class="fa fa-folder-open"></i>
<a href="javascript:void(0)" rel="category tag">技术读物</a>, <a href="javascript:void(0)" rel="category tag">编程工具</a></span></div><div class="col-md-6 tags"><span class="tags-links"><i class="fa fa-tags"></i> <a href="javascript:void(0)" rel="tag">Debug</a>, <a href="javascript:void(0)" rel="tag">GDB</a>, <a href="javascript:void(0)" rel="tag">Reversable Debugging</a></span></div></div> </footer>
</article>

<div class="fixed"></div> 
</main>

<div class="post-comments">
<div id="comments" class="comments-area">
<h2 class="comments-title">
《<span>高科技：GDB回溯调试</span>》的相关评论 </h2>
<ol class="comment-list">
<li id="comment-1198" class="comment even thread-even depth-1">
<article id="div-comment-1198" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/da3942a989b6028f23c7585d86fa7f57?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/da3942a989b6028f23c7585d86fa7f57?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn"><a href="http://li2z.cn" class="url" rel="ugc external nofollow">bones7456</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-1198"><time datetime="2009-09-28T17:31:26+08:00">2009年09月28日 17:31</time></a> </div>
</footer>
<div class="comment-content">
<p>真的啊？这个牛B了。。。打印出来的消息会给抹掉吗？</p>
</div>
 </article>
</li>
<li id="comment-1202" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1202" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/be24b063ea4f5106839b08a30780923b?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/be24b063ea4f5106839b08a30780923b?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn"><a href="http://upsuper.org.cn/" class="url" rel="ugc external nofollow">upsuper</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-1202"><time datetime="2009-09-28T21:59:16+08:00">2009年09月28日 21:59</time></a> </div>
</footer>
<div class="comment-content">
<p>我估计就是调试过了后悔了这就一新的后悔药……<br/>
调试的时候经常习惯性的下一步下一步……不小心就过头了，以前都要从头来，这下好了~</p>
</div>
 </article>
</li>
<li id="comment-1206" class="comment even thread-even depth-1">
<article id="div-comment-1206" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/3337131db31ab751cb7791ee5a718c4b?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3337131db31ab751cb7791ee5a718c4b?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn"><a href="http://blog.sina.com.cn/gnunu" class="url" rel="ugc external nofollow">gnunu</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-1206"><time datetime="2009-09-29T00:14:01+08:00">2009年09月29日 00:14</time></a> </div>
</footer>
<div class="comment-content">
<p>其实不是大家想的那样。逆向调试不是逆向执行，而是模拟逆向执行。在打开逆向调试开关后，程序的执行会记录下程序运行的详细状态轨迹（想象一下把图灵机运行时的每一步纸带的状态记录下来）。这些状态就构成了逆向调试的基础。</p>
<p>逆向调试的预期用处是，因为程序bug的发生处和表现处一般会有距离，那么在程序bug表现处回溯执行，就可以确定地找到bug的真正原因。这可是很有用的哦，因为这可以避免多次运行程序，有时还徒劳武无功，尤其是在不确定bug （heisenbug）的情况下。</p>
<p>偶然发现你的博客，很不错，我加到google reader里了。</p>
</div>
 </article>
</li>
<li id="comment-1212" class="comment byuser comment-author-ying5420 odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1212" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/adc6ab06e1e7dca92c619f4b83b27e93?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/adc6ab06e1e7dca92c619f4b83b27e93?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn"><a href="http://blog.csdn.net/ying5420" class="url" rel="ugc external nofollow">豆豆</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-1212"><time datetime="2009-09-29T12:23:01+08:00">2009年09月29日 12:23</time></a> </div>
</footer>
<div class="comment-content">
<p>这种技术貌似很强悍噢，很多时候我使用断点调试时不知道一个变量到底是在哪一行代码中赋值的，这时可以逆向回去一步一步地追查变量赋值的源头。不知道这种技术是不是干这个用的，呵呵</p>
</div>
 </article>
</li>
<li id="comment-1222" class="comment even thread-even depth-1">
<article id="div-comment-1222" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/410d1e74118c3e4464d2e5209636ab8a?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/410d1e74118c3e4464d2e5209636ab8a?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">flownight</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-1222"><time datetime="2009-09-29T22:35:08+08:00">2009年09月29日 22:35</time></a> </div>
</footer>
<div class="comment-content">
<p>还是没搞清楚，直接break然后Jump不就可以跳回去而不用重复执行了吗？难道与jump的区别是将jump执行的side effects取消…这样的话，倒还是有用的</p>
</div>
 </article>
</li>
<li id="comment-1227" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1227" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/f2169bb0a4d560b913e80ead00b63f57?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/f2169bb0a4d560b913e80ead00b63f57?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">larry</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-1227"><time datetime="2009-09-30T08:51:11+08:00">2009年09月30日 08:51</time></a> </div>
</footer>
<div class="comment-content">
<p>VS2003里已经可以逆向调试了，可以把断点往后移动，不过没GDB这么强！</p>
</div>
 </article>
</li>
<li id="comment-1230" class="comment even thread-even depth-1">
<article id="div-comment-1230" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/7ec415db35ad245e082f4059737964c8?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/7ec415db35ad245e082f4059737964c8?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">ostric</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-1230"><time datetime="2009-09-30T12:55:53+08:00">2009年09月30日 12:55</time></a> </div>
</footer>
<div class="comment-content">
<blockquote cite="#commentbody-1206"><p>
<strong><a href="#comment-1206" rel="nofollow">gnunu </a> :</strong>其实不是大家想的那样。逆向调试不是逆向执行，而是模拟逆向执行。在打开逆向调试开关后，程序的执行会记录下程序运行的详细状态轨迹（想象一下把图灵机运行时的每一步纸带的状态记录下来）。这些状态就构成了逆向调试的基础。
</p></blockquote>
<p>你的意思是说逆向调试的时候实际上已经正向执行过一次了？而且保存下来所有过程的状态？貌似是个很占内存的活啊。</p>
</div>
 </article>
</li>
<li id="comment-1231" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1231" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/3337131db31ab751cb7791ee5a718c4b?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/3337131db31ab751cb7791ee5a718c4b?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn"><a href="http://blog.sina.com.cn/gnunu" class="url" rel="ugc external nofollow">gnunu</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-1231"><time datetime="2009-09-30T15:51:07+08:00">2009年09月30日 15:51</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-1230" rel="nofollow">@ostric</a><br/>
<strong><a href="#comment-1230" rel="nofollow">ostric</a> :</strong></p>
<blockquote cite="#commentbody-1206"><p>
你的意思是说逆向调试的时候实际上已经正向执行过一次了？而且保存下来所有过程的状态？貌似是个很占内存的活啊。
</p></blockquote>
<p>还有楼上的 flownight ：<br/>
是的，是很占内存，还有硬盘，执行时生成的信息很多。没有免费午餐嘛。逆向执行本身毫无意义，也不可能，你不能取消已经造成的副作用，比如设备寄存器的读写（耗费的能量），否则不符合物理法则了。逆向调试的真正意义就在于能确定性地循迹回溯（拜于完整记录），知道程序执行过程中发生了什么事情，以便找到错误的发生地点。</p>
</div>
 </article>
</li>
<li id="comment-1268" class="comment even thread-even depth-1">
<article id="div-comment-1268" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/36e86047c910bef105436b9a4bb68a10?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/36e86047c910bef105436b9a4bb68a10?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">echotiro</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-1268"><time datetime="2009-10-03T14:15:28+08:00">2009年10月03日 14:15</time></a> </div>
</footer>
<div class="comment-content">
<p>有一个中国的开发者参与了这个特性的开发噢，哈哈：</p>
<p># Hui Zhu contributed a process record port for amd64-linux<br/>
# Hui Zhu contributed the process record framework, along with the original port for i386-linux</p>
</div>
 </article>
</li>
<li id="comment-2094" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-2094" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/86b9d8c0da52bf94402c038cfcbcc2b1?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/86b9d8c0da52bf94402c038cfcbcc2b1?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">Hui Zhu</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-2094"><time datetime="2009-11-26T11:19:59+08:00">2009年11月26日 11:19</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="http://sourceware.org/gdb/wiki/ReverseDebug" rel="nofollow ugc">http://sourceware.org/gdb/wiki/ReverseDebug</a><br/>
其实反向调试只是一个框架</p>
<p>下面需要被调试目标来实现 本的的比如record <a href="http://sourceware.org/gdb/wiki/ProcessRecord" rel="nofollow ugc">http://sourceware.org/gdb/wiki/ProcessRecord</a><br/>
或者靠REMOTE的 SIMICS VMWARE等等 <a href="http://www.gnu.org/software/gdb/news/reversible.html" rel="nofollow ugc">http://www.gnu.org/software/gdb/news/reversible.html</a></p>
</div>
 </article>
</li>
<li id="comment-7019" class="comment even thread-even depth-1">
<article id="div-comment-7019" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/f4be055f39c58d59066387e3771cf1d6?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/f4be055f39c58d59066387e3771cf1d6?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">ggs334</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-7019"><time datetime="2010-06-03T10:43:05+08:00">2010年06月03日 10:43</time></a> </div>
</footer>
<div class="comment-content">
<p>任何技术都是有一定的使用和适用范围的，个人感觉这个技术很不错</p>
</div>
 </article>
</li>
<li id="comment-11427" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="http://www.94pm.com/?p=204" class="url" rel="ugc external nofollow">泡面网 » Waterfall 软件工程</a> </div>
</li>
<li id="comment-11556" class="comment byuser comment-author-walfud even thread-even depth-1">
<article id="div-comment-11556" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/b922ed91610fbe2ee3f1295522aa97f2?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b922ed91610fbe2ee3f1295522aa97f2?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">walfud</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-11556"><time datetime="2010-10-13T11:49:38+08:00">2010年10月13日 11:49</time></a> </div>
</footer>
<div class="comment-content">
<p>下载了，一个gdb7.1， 但是提示不支持命令rn，reverse-next好像也不行。好像没有领会高手们的意思。。。</p>
</div>
 </article>
</li>
<li id="comment-26188" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-26188" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="https://secure.gravatar.com/avatar/681eb11ad2a723c067a7e5a213bf7d23?s=50&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/681eb11ad2a723c067a7e5a213bf7d23?s=100&amp;d=mm&amp;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async"/> <b class="fn">jogumsim</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/1502.html#comment-26188"><time datetime="2011-01-31T15:25:57+08:00">2011年01月31日 15:25</time></a> </div>
</footer>
<div class="comment-content">
<p>可參考這篇<br/>
<a href="http://www.ibm.com/developerworks/cn/linux/l-cn-gdb7rd/index.html" rel="nofollow ugc">http://www.ibm.com/developerworks/cn/linux/l-cn-gdb7rd/index.html</a></p>
</div>
 </article>
</li>
<li id="comment-820778" class="pingback even thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://tianya.standsun.com/?p=593" class="url" rel="ugc external nofollow">gdb 多级目录 成员函数 中断点 高级调试 | 天涯技术博客</a> </div>
</li>
<li id="comment-909728" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="http://www.multiprocess.net/?p=715" class="url" rel="ugc external nofollow">GDB 7.0 发布 | multiprocess</a> </div>
</li>
<li id="comment-1831442" class="pingback even thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://www.codeba.cc/gdb-7-0-%e5%8f%91%e5%b8%83.html" class="url" rel="ugc external nofollow">GDB 7.0 发布 | | Codeba</a> </div>
</li>
</ol>

</div>
</div>
</div>

</div> 
</div>

</div>

</div>




















</body></html>